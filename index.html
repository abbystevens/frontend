<!DOCTYPE html>
<html>
<head>
  <title>OrestarClone</title>
  <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
</script>

<body>
  <form>
    <p>From Date(YYYY-MM-DD): </p><input type="text" name="from_date"><br>
    <p>To Date(YYYY-MM-DD): </p><input type="text" name="to_date"><br>
    <p>Query</p><input type="text" name="query"><br>
    <input type="submit" value="submit">
  </form>
</body>
</html>

<script type="text/javascript">
  $("form").submit(function() {
    $.ajax({
      type: "POST",
      url: "http://54.244.132.14:5000/search",
      data: $("form").serialize(),
      success: function(data) {
        console.log(data);

        if ($('table').length == 0) {
          $('form').after("<div class='table-responsive'><table class='table table-striped'><thead><th>Active Election</th><th>Addr Line1</th><th>Amount</th><th>Book Type</th><th>Candidate First Name</th><th>Candidate Last Name</th><th>City</th><th>Committee Name</th><th>Zip</th></thead></div>")
        } else {
          $('table').remove();
          $('form').after("<div class='table-responsive'><table class='table table-striped'>")
        }

        var d = JSON.parse(data)
        $.each(d, function(i, item) {
          $('table').append('<tr>' + '<td>' + item['Active Election'] + '</td>' +'<td>' + item['Addr Line1'] + '</td>' + '<td>' + item['Amount'] + '</td>' + '<td>' + item['Book Type'] + '</td>' + '<td>' + item['Candidate First Name'] + '</td>' + '<td>' + item['Candidate Last Name'] + '</td>' + '<td>' + item['City'] + '</td>' + '<td>' + item['Committee Name'] + '</td>' + '<td>' + item['Zip'] + '</td></tr>')
        })
      }
    });
    event.preventDefault();
  })
</script>
